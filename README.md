# Микросервисное приложение для аренды автомобилей
## User-service
Отвечает за регистрацию, авторизацию пользователей и генерацию рефреш-токенов.
Реализована аутентификация по JWT.
Используются роли ROLE_USER и ROLE_ADMIN.

## Api-gateway
Единая точка входа в приложение.
Реализует маршрутизацию запросов ко всем микросервисам, проксирует заголовки, проверяет авторизацию.

## Car-service
CRUD-сервис для машин и моделей машин, статусная система (AVAILABLE, BOOKED, UNDER_REPAIR).
Фильтрация по статусу, реакция на события бронирования (Kafka).

## Booking-service
Обрабатывает бронирования.
Поддерживает создание, завершение, отмену брони при отсутствии оплаты в течение 15 минут.
Сохраняет историю изменения статусов в booking-history.
Проверка наличия и доступности машины через запрос в car-service через CarClient с помощью RestTemplate.
Отправка событий через кафку в car-service, payment-service.

## Payment-service
Хранение и управление платежами.
Поддержка статусов: NEW, PAID, CANCELLED.
Валидация оплаты, отправка событий Kafka.
Пагинация, фильтрация по статусу, защита прав доступа.

## Notification-service
Обрабатывает Kafka-события и отправляет уведомления на почту пользователя, а также push-уведомления через веб-сокеты.
Можно запустить файлик websocket.html для проверки пушей вебсокетов.
Почта, с которой отправляются уведомления, указана в application.yaml

# Инструкция для установки
1) Для поднятия кафки и zookeeper: docker-compose up -d 
2) БД установлено локально через postgresql
3) Запустить каждый сервис

# Источники:
- Аутентификация, генерация токенов: https://www.bezkoder.com/spring-boot-jwt-authentication/
- Api-gateway: https://spring.io/guides/gs/gateway
- Kafka: https://habr.com/ru/companies/slurm/articles/772818/
